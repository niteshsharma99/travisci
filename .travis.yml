sudo: required
dist: xenial
language: python
python:
- '3.8'
os:
- linux
services:
- docker
env:
  global:
  - GIT_SHA=$(git rev-parse HEAD)
  - CLOUDSDK_CORE_DISABLE_PROMPTS=1
before_install:
- openssl aes-256-cbc -K $encrypted_4e8410560a1c_key -iv $encrypted_4e8410560a1c_iv
  -in cluster_configuration.sh.enc -out cluster_configuration.sh -d
- chmod +x cluster_configuration.sh
install:
- pip install -r requirements.txt
- "./cluster_configuration.sh"
script:
- echo "hello"
after_success:
- echo "deployment started......."
deploy:
  provider: script
  script: bash scripts/deploy.sh
  on:
    branch: main
